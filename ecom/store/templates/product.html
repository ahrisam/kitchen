{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Product View</title>
  {% include 'navbar.html' %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="{% static 'css/product.css' %}">
</head>
<body>

<div class="product-card">
  <div class="product-image">
    <img src="{{ product.image.url }}" alt="{{ product.name }}">
  </div>
  <div class="product-details">
    <h2>{{ product.name }}</h2>
    <p>{{ product.description }}</p>
    <h4>{{ product.price }}</h4>

    <div class="quantity-selector">
      <button class="btn btn-outline-secondary">âˆ’</button>
      <input type="text" value="1">
      <button class="btn btn-outline-secondary">+</button>
    </div>

    <button class="add-to-cart-btn" id="add-cart" value="{{ product.id }}">ADD TO CART</button>
  </div>
  <script>
    $(document).on("click", "#add-cart", function (e){
        e.preventDefault();
        $.ajax({
          type: "POST",
          url: "{% url 'cart_add' %}",
          data:{
            product_id: $(this).val(),
            csrfmiddlewaretoken: "{{ csrf_token }}",
            action: "post",
          },
            success: function(json) {
              console.log(json);
            },
            error: function (xhr, errmsgm, err){ },
        });
    });
</script>
  <!-- <h1>Other products</h1> 
  {% for product in products %}
    {{ product.name }}

{% endfor%} -->
</div>


</body>
</html>